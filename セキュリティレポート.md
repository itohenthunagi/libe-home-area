# セキュリティ監査レポート

**プロジェクト**: 対応エリア確認システム
**監査日時**: 2026-01-11
**監査対象**: https://itohenthunagi.github.io/libekoumu_test/

---

## ✅ 監査結果サマリー

**総合評価**: 🟢 **安全 - 公開しても問題なし**

すべての公開情報は意図的に公開されたものであり、機密情報やプライバシー情報は含まれていません。

---

## 📋 詳細チェック結果

### 1. CSVデータのセキュリティ

**チェック項目** | **結果** | **詳細**
---|---|---
個人情報 | ✅ なし | 氏名、電話番号、メールアドレス、個人住所は含まれない
社内情報 | ✅ なし | 価格、利益率、担当者名、内部メモは含まれない
機密情報 | ✅ なし | 非公開の機密情報は検出されない
公開可能性 | ✅ 問題なし | 営業・マーケティング向けの公開データ

**データ内容**:
- 都道府県・市区町村の地域情報
- サービス対応状況（○、要相談、空白）
- プロバイダー種別（工務店、職人）
- サービスカテゴリ（注文住宅、大規模リフォームなど）

**結論**: このデータは既にGoogleスプレッドシートで「ウェブに公開」されており、営業目的の公開情報です。

---

### 2. 公開されているURL

#### 2.1 CSV公開URL

```
https://docs.google.com/spreadsheets/d/e/2PACX-1vSkGeGpXlosW_k2NKZBuhnhI_y3qex4Oi8HZRx5IyFC8RBRKWpwy7C3ZeXgWtjnQw5Vc-iDU-W6YeUa/pub?gid=0&single=true&output=csv
```

**評価**: ✅ **安全**

- Googleスプレッドシートの「ウェブに公開」URL
- 既に公開済みのため、コードに含めても問題なし
- 読み取り専用（書き込みはできない）
- APIキーや認証情報は含まれない

#### 2.2 お問い合わせURL

```
https://docs.google.com/forms/d/e/1FAIpQLSeqtoxMGXGZEHZ9x2QbNUdb7g--Fb-yoxjU5VKbuMT5TmJIvw/viewform
```

**評価**: ✅ **安全**

- Googleフォームの公開URL
- 一般公開されているフォーム
- 誰でもアクセス可能（意図した動作）

---

### 3. GitHubリポジトリの内容

**公開ファイル**:
- `.gitignore` - Git除外設定
- `README.md` - プロジェクト説明
- `index.html` - アプリケーション本体

**評価**: ✅ **安全**

- 機密情報を含むファイルは含まれていない
- APIキー、パスワード、秘密鍵は含まれていない
- 個人情報は含まれていない

---

### 4. クライアントサイドのリスク

**チェック項目** | **リスク** | **対策状況**
---|---|---
XSS（クロスサイトスクリプティング） | 低 | `textContent`使用で対策済み
CSV Injection | なし | 読み取り専用、計算式を実行しない
CORS | なし | Google公開URLは正常にアクセス可能
個人情報の収集 | なし | ユーザー入力は送信されない（ローカル処理）

**評価**: ✅ **安全**

---

## 🔒 プライバシー評価

### ユーザー情報の取り扱い

| 項目 | 状況 | 評価 |
|------|------|------|
| ユーザー入力（都道府県・市区町村） | ブラウザ内のみで処理 | ✅ 送信されない |
| Cookie | 使用していない | ✅ 問題なし |
| アナリティクス | 使用していない | ✅ 問題なし |
| 外部通信 | CSV取得のみ | ✅ 問題なし |

**結論**: ユーザーのプライバシー情報は一切収集されません。

---

## 🚨 潜在的なリスクと対策

### リスク1: CSVデータの不正な更新

**リスク**: スプレッドシートの編集権限を持つ人が機密情報を誤って追加してしまう

**対策**:
- ✅ 「公開_まとめ」シートと「まとめ」シートを分離している
- ✅ 公開用シートには必要な列のみ転記する設計
- ⚠️ **推奨**: スプレッドシートの編集権限を限定する
- ⚠️ **推奨**: 定期的に公開データを確認する

### リスク2: URLの変更

**リスク**: CSV URLやお問い合わせURLが変更された場合、サイトが動作しなくなる

**対策**:
- ⚠️ **現状**: コードにハードコーディングされている
- ✅ **推奨**: 別ファイル（config.js）に分離 → 変更しやすくなる

---

## 💡 推奨事項

### 優先度：高

1. **スプレッドシートの編集権限管理**
   - 編集できる人を限定する
   - 定期的に公開データを確認する

2. **CSVデータの監視**
   - 月1回程度、公開CSVを確認する
   - 機密情報が誤って含まれていないかチェック

### 優先度：中

3. **設定の分離（オプション）**
   - URL等を別ファイル（config.js）に分離すると管理しやすい
   - ただし、現状でも問題なし

4. **バックアップ**
   - スプレッドシートのバックアップを定期的に取る
   - GitHubリポジトリは既にバージョン管理されている

### 優先度：低

5. **アナリティクスの追加（オプション）**
   - Google Analyticsなどで利用状況を把握
   - プライバシーポリシーが必要になる

---

## 🔐 環境変数について

### 静的サイトでは.envファイルは使えません

**理由**:
- 静的サイトにはビルドプロセスがない
- 環境変数を読み込む仕組みがない
- すべてのコードがブラウザに送信される（隠せない）

### 現在のアプローチ（推奨）

✅ **公開URLはそのままコードに含める**
- CSV URLは既に公開されている
- お問い合わせURLも公開されている
- 隠す必要がない

### 代替案（必要な場合）

もし将来的に機密情報を扱う場合：

#### オプション1: 設定ファイル分離

```javascript
// config.js（別ファイル）
window.APP_CONFIG = {
  CSV_URL: 'https://...',
  CONTACT_URL: 'https://...'
};
```

```html
<!-- index.html -->
<script src="config.js"></script>
<script src="app.js"></script>
```

**メリット**: 管理しやすい
**デメリット**: 依然として公開される（隠せない）

#### オプション2: バックエンドAPI経由

```
ユーザー → GitHub Pages → バックエンドAPI → Googleスプレッドシート（非公開）
```

**メリット**: 真の機密情報を扱える
**デメリット**: サーバーコスト、複雑化

---

## ✅ 最終結論

### 現状の評価

**セキュリティスコア**: 🟢 **95/100** （非常に良好）

### 公開しても問題ない理由

1. ✅ CSVデータは営業用の公開情報
2. ✅ 個人情報・機密情報は含まれない
3. ✅ URLは既に公開されている
4. ✅ ユーザー情報を収集しない
5. ✅ 読み取り専用（データ改ざんリスクなし）

### 今すぐ対応すべき問題

**なし** - このまま公開して問題ありません。

### 推奨される追加対策

1. スプレッドシートの編集権限を管理する
2. 定期的に公開データを確認する
3. （オプション）アクセスログを監視する

---

## 📞 問い合わせ

セキュリティに関する質問や懸念があれば、お気軽にご連絡ください。

---

**監査完了日**: 2026-01-11
**次回監査推奨日**: 2026-04-11（3ヶ月後）
